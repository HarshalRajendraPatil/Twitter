extends layouts/main-layout.pug

block content
  if !profileUser
    span.errorMessage Cannot find user with the given username.
  else
    script.
      const profileUserId = `!{profileUser._id}`
      const selectedTab = `!{selectedTab}`

    .profileHeaderContainer
      .coverPhotoContainer  
        .userImageContainer
          img(src=profileUser.profilePic, alt="User profile image")
      .profileButtonContainer 
        if (profileUser._id != userLoggedIn._id)
          a.profileButton(hre=`/messages/profileUser._id`)
            i.fa-solid.fa-envelope
          +createFollowButton(profileUser, true)
      .userDetailsContainer
        span.displayName #{profileUser.firstName} #{profileUser.lastName} 
        span.username @#{profileUser.username}
        span.description #{profileUser.description}

        .followersContainer
          a(href=`/profile/${profileUser.username}/following`) 
            span.value #{0}
            span Following
          a(href=`/profile/${profileUser.username}/followers`) 
            span.value #{0}
            span Followers

    .tabsContainer
      +createTab("Posts", `/profile/${profileUser.username}`, selectedTab != "replies")
      +createTab("Relies", `/profile/${profileUser.username}/replies`, selectedTab == "replies")

    .postsContainer 
    +createPostModals(userLoggedIn)

block scripts   
  script(src="/js/profile.js")  